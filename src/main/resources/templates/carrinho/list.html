<!DOCTYPE html>
<html th:replace="~{/fragments/layout :: layout(~{::head},~{::main})}">


<head th:replace="fragments/head.html :: head('Carrinho')">
    <script>
        function selecionarPessoa(elemento, idPessoa) {
            var tipoPessoa = elemento.getAttribute("data-tipo");

            window.location.href = "/finalizar/" + idPessoa + "?tipoPessoa=" + tipoPessoa;

        }
    </script>
</head>


<body>

<main>
    <div class="container my-2">

        <table border="1" class="table table-striped table-responsive-md">
            <thead>
            <tr>
                <th>Produto</th>
                <th>Quantidade</th>
                <th>Opção</th>

            </tr>
            <h1 style="text-align:center">Carrinho de Compras</h1>
            </thead>
            <tbody>
            <tr th:each="item,posicao : ${session.venda.itemVendas}">
                <td th:text="${item.produto.descricao}"></td>
                <td th:text="${item.quantidade}"></td>
                <td><a onclick="return window.confirm('Tem certeza que deseja excluir este registro?')"
                       th:href="@{/vendas/remover/{posicao}(posicao=${posicao.index})}" class="btn btn-danger">Remover</a></td>
            </tr>

            </tbody>
        </table>


        <div class="mb-5">
            <form form method="post" th:action="@{/vendas/pesquisar}">
                <input type="radio" id="f" name="pessoa" value="F" class="mr-6">
                <label for="f" style="margin-right:10px;">Pessoa Física</label>
                <input type="radio" id="j" name="pessoa" value="J">
                <label for="j">Pessoa Jurídica</label><br>
                <input type="submit" value="Enviar" class="btn btn-secondary">
            </form>
        </div>



        <table border="1" class="table table-striped table-responsive-md">
            <thead>
            <tr>
                <th>Nomes</th>
            </tr>
            <!--<h1 style="text-align:center">Nome das Pessoas</h1>-->
            </thead>


            <tbody>
            <tr th:each="pessoa : ${pessoas}">
                <td>
                    <span th:if="${tipoPessoa == 'F'}" th:text="${pessoa.nome}"></span>
                    <span th:if="${tipoPessoa == 'J'}" th:text="${pessoa.razaoSocial}"></span>
                </td>
                <!-- Colunas adicionais, se necessário -->
                <td>
                <td><a th:href="@{/vendas/selecionar/{id}(id=${pessoa.id})}" class="btn btn-success" >Selecionar</a></td>
            </tr>
            </tbody>
        </table>





        <div class="row">
            <div class="col">
                <a th:href="@{/vendas/finalizar}" class="btn btn-success float-right">Finalizar Comprar</a>
            </div>
        </div>

        <hr>
        <div class="row">
            <div class="col d-flex justify-content-between align-items-center">
                <h2 class="float-right mr-15">Total: R$ <td th:text="${session.venda.total}" ></td></h2>
                <a th:href="@{/produtos/list}" class="btn btn-info">Voltar</a>
            </div>
        </div>



    </div>
</main>

</body>
</html>